(function(){"use strict";addEventListener("message",m=>{const n=m.data.svgString,o=n.match(/x="\d+"/g).map(t=>t.replace('x="',"").replace('"',"")).map(t=>parseInt(t,10)),i=n.match(/y="\d+"/g).map(t=>t.replace('y="',"").replace('"',"")).map(t=>parseInt(t,10)),l=parseInt(n.match(/width="(\d+)"/)[1],10),u=Math.min(...o,...i),g=Math.max(...o,...i),s=Array((g-u)/l+1).fill(0).map((t,e)=>e*l+u),d=s.length,r=s.reduce((t,e)=>(t.push(s.reduce((p,a)=>(p.push(n.includes(`x="${a}" y="${e}"`)),p),[])),t),[]);d%2!==0&&r.push(Array(d).fill(!1));const h=Array(r.length/2).fill(0).map((t,e)=>e*2).map(t=>[t,t+1]).map(([t,e])=>r[t].map((a,x)=>{const c=r[e][x];return a&&c?"\u2588":a&&!c?"\u2580":!a&&c?"\u2584":" "}).join("")).join(`
`),f=m.data.timestamp;postMessage({qrText:h,timestamp:f})})})();
